<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TikTok Automation Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#111827;
  --muted:#6b7280;

  --green:#22c55e;
  --red:#ef4444;
  --blue:#3b82f6;
  --gray:#e5e7eb;
}

/* Dark mode variables */
body.dark{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --gray:#334155;
}

body{
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  transition:background .3s,color .3s;
}

/* Cards */
.card{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
  transition:all .25s ease;
}
.card.clickable:hover{
  transform:translateY(-3px) scale(1.01);
}
.card:active{transform:scale(.97)}

/* States */
.done{background:var(--green);color:white}
.failed{background:var(--red);color:white}
.disabled{opacity:.45;pointer-events:none}

/* Time rows */
.time{
  background:var(--gray);
  padding:16px;
  border-radius:16px;
  margin-bottom:10px;
  cursor:pointer;
  transition:.25s;
}
.time:hover{transform:scale(1.02)}
.time.done{
  background:var(--green);
  color:white;
  pointer-events:none;
}
.time.next{
  background:var(--blue);
  color:white;
  animation:pulse 1.5s infinite;
}

@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(59,130,246,.5)}
  70%{box-shadow:0 0 0 14px rgba(59,130,246,0)}
  100%{box-shadow:0 0 0 0 rgba(59,130,246,0)}
}

/* Header */
#header{
  position:sticky;
  top:0;
  z-index:20;
  background:var(--bg);
  padding-bottom:8px;
}

/* Responsive */
@media (min-width:768px){.container{max-width:600px}}
@media (min-width:1024px){.container{max-width:720px}}
</style>
</head>

<body>

<div class="container mx-auto p-4">

<!-- MAIN HEADER -->
<div id="header" class="flex justify-between items-center mb-4">
  <div class="font-bold text-lg tracking-wide">TikTok Automation</div>
  <div class="flex gap-2">
    <button id="themeBtn" class="px-3 py-1 rounded-full bg-gray-200 dark:bg-slate-700">
      üåô
    </button>
    <button id="resetBtn" class="px-3 py-1 rounded-full bg-gray-200 dark:bg-slate-700">
      ‚Ü∫
    </button>
  </div>
</div>

<!-- BACK ICON -->
<div id="backBtn" class="hidden text-2xl mb-3 cursor-pointer select-none">‚Üê</div>

<div id="dates"></div>
<div id="accounts" class="hidden"></div>
<div id="times" class="hidden"></div>

</div>

<script>
// ===== THEME =====
const themeBtn=document.getElementById("themeBtn");
const savedTheme=localStorage.getItem("theme");
if(savedTheme==="dark"){
  document.body.classList.add("dark");
  themeBtn.textContent="‚òÄÔ∏è";
}

themeBtn.onclick=()=>{
  document.body.classList.toggle("dark");
  const isDark=document.body.classList.contains("dark");
  themeBtn.textContent=isDark?"‚òÄÔ∏è":"üåô";
  localStorage.setItem("theme",isDark?"dark":"light");
};

// ===== DATE =====
const today=new Date().toISOString().split("T")[0];
const nowMinutes=new Date().getHours()*60+new Date().getMinutes();

// ===== DATA =====
const accounts=[
 {name:"Priya",topic:"Candy_0999 (Insta)",times:["15:45","19:45"]},
 {name:"Muskan Khan",topic:"Random Edit Clips",times:["16:00","20:00","22:30"]},
 {name:"Maya Ali",topic:"Random Edit Clips",times:["16:15","18:30","20:15","22:45"]},
 {name:"Sarah Khan",topic:"Sanrita Videos Edit",times:["16:30","18:45","20:30","23:00"]},
 {name:"Dur-e-Fishan",topic:"Random Edit Clips",times:["16:45","20:45"]},
 {name:"Aisha",topic:"Prapit (Insta)",times:["17:00","21:00"]},
 {name:"Aalia Batool",topic:"Sanorita Videos Edit",times:["17:15","18:45","21:15","23:45"]}
];

// ===== STORAGE =====
let store=JSON.parse(localStorage.getItem("tt_auto"))||{};
const save=()=>localStorage.setItem("tt_auto",JSON.stringify(store));

// ===== ELEMENTS =====
const datesDiv=document.getElementById("dates");
const accDiv=document.getElementById("accounts");
const timeDiv=document.getElementById("times");
const backBtn=document.getElementById("backBtn");
const resetBtn=document.getElementById("resetBtn");
const header=document.getElementById("header");

// ===== RESET =====
resetBtn.onclick=()=>{
  const d=prompt("Enter date (YYYY-MM-DD)");
  if(prompt("Password")!=="mopi") return;
  delete store[d];
  save(); renderDates();
};

// ===== DATES =====
function renderDates(){
  header.classList.remove("hidden");
  themeBtn.classList.remove("hidden");
  backBtn.classList.add("hidden");

  datesDiv.innerHTML="";
  accDiv.classList.add("hidden");
  timeDiv.classList.add("hidden");

  for(let i=0;i<60;i++){
    let d=new Date();
    d.setDate(d.getDate()+i);
    let ds=d.toISOString().split("T")[0];

    let card=document.createElement("div");
    card.className="card text-center";
    card.innerText=ds;

    const data=store[ds];
    const past=ds<today;

    if(data){
      const allDone=accounts.every(a=>data[a.name]?.done);
      if(allDone) card.classList.add("done");
      else if(past) card.classList.add("failed");
    }

    if(ds===today){
      card.classList.add("clickable");
      card.onclick=()=>renderAccounts(ds);
    }else{
      card.classList.add("disabled");
    }
    datesDiv.appendChild(card);
  }
}

// ===== ACCOUNTS =====
function renderAccounts(date){
  header.classList.add("hidden");
  backBtn.classList.remove("hidden");
  backBtn.onclick=renderDates;

  datesDiv.innerHTML="";
  accDiv.innerHTML="";
  accDiv.classList.remove("hidden");
  timeDiv.classList.add("hidden");

  store[date] ||= {};

  accounts.forEach(a=>{
    let c=document.createElement("div");
    c.className="card clickable";
    c.innerText=a.name;

    if(store[date][a.name]?.done){
      c.classList.add("done","disabled");
    }else{
      c.onclick=()=>renderTimes(date,a);
    }
    accDiv.appendChild(c);
  });
}

// ===== TIMES =====
function renderTimes(date,acc){
  accDiv.classList.add("hidden");
  timeDiv.classList.remove("hidden");
  backBtn.onclick=()=>renderAccounts(date);
  timeDiv.innerHTML="";

  store[date][acc.name] ||= {
    status:Array(acc.times.length).fill(false),
    done:false
  };

  timeDiv.innerHTML=`
    <div class="card text-center font-semibold">
      ${acc.name}<br>
      <span class="text-sm opacity-70">${acc.topic}</span>
    </div>
  `;

  let nextIndex=-1;
  if(date===today){
    acc.times.forEach((t,i)=>{
      let [h,m]=t.split(":").map(Number);
      if(h*60+m>nowMinutes && nextIndex===-1){
        nextIndex=i;
      }
    });
  }

  acc.times.forEach((t,i)=>{
    let row=document.createElement("div");
    row.className="time";
    row.innerText=t;

    if(store[date][acc.name].status[i]){
      row.classList.add("done");
    }else if(i===nextIndex){
      row.classList.add("next");
    }

    row.onclick=()=>{
      store[date][acc.name].status[i]=true;
      if(store[date][acc.name].status.every(v=>v)){
        store[date][acc.name].done=true;
        save(); renderAccounts(date);
      }else{
        save(); renderTimes(date,acc);
      }
    };
    timeDiv.appendChild(row);
  });
}

renderDates();
</script>

</body>
</html>
