<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TikTok Automation Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
:root{
  --green:#34d399;
  --red:#ef4444;
  --gray:#e5e7eb;
}

body{
  background:linear-gradient(180deg,#f9fafb,#f3f4f6);
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
}

/* Card base */
.card{
  background:white;
  border-radius:16px;
  padding:14px;
  margin-bottom:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.08);
  transition:all .25s ease;
}

/* Hover / tap feedback */
.card.clickable:hover{
  transform:translateY(-2px) scale(1.01);
  box-shadow:0 10px 22px rgba(0,0,0,.12);
}
.card.clickable:active{
  transform:scale(.97);
}

/* States */
.done{
  background:var(--green)!important;
  color:white;
  animation:pop .3s ease;
}
.failed{
  background:var(--red)!important;
  color:white;
}
.disabled{
  opacity:.45;
  pointer-events:none;
}

/* Time rows */
.time-row{
  background:var(--gray);
  border-radius:14px;
  padding:14px;
  margin-bottom:8px;
  cursor:pointer;
  transition:all .25s ease;
  position:relative;
}
.time-row:hover{
  transform:scale(1.01);
}
.time-row.done{
  background:var(--green);
  color:white;
  pointer-events:none;
  animation:pop .25s ease;
}

/* Time hover 24->12 format */
.time-row span{
  transition:all .2s ease;
}

.time-row span::after{
  content: attr(data-hover);
  position: absolute;
  right:14px;
  opacity:0;
  transition:opacity .2s ease;
}
.time-row:hover span::after{
  opacity:1;
}

/* Animations */
@keyframes pop{
  0%{transform:scale(.95)}
  100%{transform:scale(1)}
}

/* Header */
#header{
  position:sticky;
  top:0;
  z-index:10;
  background:rgba(249,250,251,.9);
  backdrop-filter:blur(6px);
  padding-bottom:6px;
}

/* Responsive */
@media (min-width:768px){
  .container{max-width:640px}
}
@media (min-width:1024px){
  .container{max-width:720px}
}
</style>
</head>

<body>

<div class="container mx-auto p-4">

  <!-- HEADER (MAIN PAGE ONLY) -->
  <div id="header" class="flex justify-between items-center mb-4">
    <div class="text-lg font-bold tracking-wide">TikTok Automation</div>
    <button id="resetBtn"
      class="text-lg bg-gray-200 hover:bg-gray-300 transition px-3 py-1 rounded-full">↺</button>
  </div>

  <!-- BACK ICON -->
  <div id="backBtn" class="hidden mb-3 text-2xl cursor-pointer select-none">←</div>

  <div id="datesPage"></div>
  <div id="accountsPage" class="hidden"></div>
  <div id="timesPage" class="hidden"></div>

</div>

<script>
// ================= CONFIG =================
const today = "2026-11-01";

// Original topics per account
const accountsData = [
  { name:"Priya", topic:"Candy_0999 (Insta)", times:["15:45","19:45"], videos:2 },
  { name:"Muskan Khan", topic:"Random Edit Clips", times:["16:00","20:00","22:30"], videos:3 },
  { name:"Maya Ali", topic:"Random Edit Clips", times:["16:15","18:30","20:15","22:45"], videos:4 },
  { name:"Sarah Khan", topic:"Sanrita Videos Edit", times:["16:30","18:45","20:30","23:00"], videos:4 },
  { name:"Dur-e-Fishan", topic:"Random Edit Clips", times:["16:45","20:45"], videos:2 },
  { name:"Aisha", topic:"Prapit (Insta)", times:["17:00","21:00"], videos:2 },
  { name:"Aalia Batool", topic:"Sanorita Videos Edit", times:["17:15","18:45","21:15","23:45"], videos:4 }
];

const accountNames = accountsData.map(a=>a.name);

// ================= STORAGE =================
let store = JSON.parse(localStorage.getItem("automation")) || {};
const save = ()=>localStorage.setItem("automation",JSON.stringify(store));

// ================= ELEMENTS =================
const datesPage = document.getElementById("datesPage");
const accountsPage = document.getElementById("accountsPage");
const timesPage = document.getElementById("timesPage");
const backBtn = document.getElementById("backBtn");
const resetBtn = document.getElementById("resetBtn");
const header = document.getElementById("header");

let currentDate="";

// ================= RESET =================
resetBtn.onclick=()=>{
  const date=prompt("Enter date (YYYY-MM-DD)");
  if(!date) return;
  if(prompt("Password")!=="mopi") return alert("Wrong password");
  delete store[date];
  save();
  renderDates();
};

// ================= HELPER 24H -> 12H =================
function to12Hour(t){
  let [h,m]=t.split(":").map(Number);
  let suffix=h>=12?"PM":"AM";
  h=h%12||12;
  return `${h}:${m.toString().padStart(2,'0')} ${suffix}`;
}

// ================= RENDER DATES =================
function renderDates(){
  header.classList.remove("hidden");
  backBtn.classList.add("hidden");

  datesPage.innerHTML="";
  datesPage.classList.remove("hidden");
  accountsPage.classList.add("hidden");
  timesPage.classList.add("hidden");

  for(let i=0;i<60;i++){
    let d=new Date(today);
    d.setDate(d.getDate()+i);
    let dateStr=d.toISOString().split("T")[0];

    let div=document.createElement("div");
    div.className="card text-center";
    div.innerText=dateStr;

    const data=store[dateStr];
    const isPast=dateStr<today;

    if(data){
      const allDone=accountNames.every(a=>data[a]?.done);
      if(allDone){
        div.classList.add("done");
        div.innerText+="\nAll tasks done";
      }else if(isPast){
        div.classList.add("failed");
        div.innerText+="\nTasks incomplete";
      }
    }

    if(dateStr===today){
      div.classList.add("clickable");
      div.onclick=()=>renderAccounts(dateStr);
    }else{
      div.classList.add("disabled");
    }

    datesPage.appendChild(div);
  }
}

// ================= RENDER ACCOUNTS =================
function renderAccounts(date){
  currentDate=date;
  header.classList.add("hidden");
  backBtn.classList.remove("hidden");
  backBtn.onclick=renderDates;

  datesPage.classList.add("hidden");
  accountsPage.classList.remove("hidden");
  timesPage.classList.add("hidden");
  accountsPage.innerHTML="";

  store[date] ||= {};

  accountsData.forEach(acc=>{
    let div=document.createElement("div");
    div.className="card clickable";
    div.innerText=acc.name;

    if(store[date][acc.name]?.done){
      div.classList.add("done","disabled");
    }else{
      div.onclick=()=>renderTimes(acc);
    }
    accountsPage.appendChild(div);
  });
}

// ================= RENDER TIMES =================
function renderTimes(acc){
  backBtn.onclick=()=>renderAccounts(currentDate);
  accountsPage.classList.add("hidden");
  timesPage.classList.remove("hidden");
  timesPage.innerHTML="";

  store[currentDate][acc.name] ||= {
    topic: acc.topic,
    times: acc.times,
    status:Array(acc.times.length).fill(false),
    done:false
  };

  const data=store[currentDate][acc.name];

  timesPage.innerHTML=`
    <div class="card text-center font-semibold">
      ${acc.name}<br>
      <span class="text-sm opacity-70">${data.topic}</span>
    </div>`;

  data.times.forEach((t,i)=>{
    let row=document.createElement("div");
    row.className="time-row clickable";

    // 24h span, hover shows 12h
    let span=document.createElement("span");
    span.innerText=t;
    span.setAttribute("data-hover",to12Hour(t));
    row.appendChild(span);

    if(data.status[i]) row.classList.add("done");

    row.onclick=()=>{
      if(data.status[i]) return;
      data.status[i]=true;
      if(data.status.every(v=>v)){
        data.done=true;
        save();
        renderAccounts(currentDate);
      }else{
        save();
        renderTimes(acc);
      }
    };
    timesPage.appendChild(row);
  });
}

// ================= INIT =================
renderDates();
</script>

</body>
</html>
